{% extends 'fn2Based_special.html' %}
{% block title %}
維護分店群組資料
{% endblock title %}

{% block funcTitle %}
A02維護分店群組資料
{% endblock funcTitle %}


{% block titleRow %}
<td class="pkField" name="shopgroup_id">
    群組編號
</td>
<td name="shopgroup_name">
    群組名稱
</td>
{% endblock titleRow %}


{% block subtable_titleRow %}
<td >
    分店編號
</td>
<td>
    分店名稱
</td>
<td >
    分店類型
</td>
<td >
    公司品牌
</td>
{% endblock subtable_titleRow %}


{% block main_table_fields_input_typpe %}
<script>
var input_type_config1 = {
    "shopgroup_id":{
        inputType : "input",
    },
    "shopgroup_name":{
        inputType : "input",
    },
}
</script>
{% endblock main_table_fields_input_typpe %}


{% block dynamic_table_settings %}
dynamic_table("table1","add1","del1",pkList=['shopgroup_id'],titleRow=true,input_type_config1,false);
{% endblock dynamic_table_settings %}

{% block vm_successModal_redirectURL %}
"{% url 'basic_data:a02' %}"
{% endblock vm_successModal_redirectURL %}

{% block input_type_config_settings %}
    shopgroup_id:{
        inputType : "input",
    },
    shopgroup_name:{
        inputType : "input",
    }
{% endblock input_type_config_settings %}


{% block field_check_rule_settings %}
    shopgroup_id:{
        checkStrLen:[1,20],
        checkEngNumCombination:true,
        repeatness : true,
        required:true
    },
    shopgroup_name:{
        checkStrLen:[0,50],
        checkEngNumCombination:false,
        repeatness : true,
        required:true
    }
{% endblock field_check_rule_settings %}

{% block showShop_ajax_url %}
'{% url "basic_data:a02" %}'
{% endblock showShop_ajax_url %}

{% block queryFunc_ajax_url %}
'{% url "basic_data:a02" %}'
{% endblock queryFunc_ajax_url %}

{% block update_ajax_url %}
'{% url "basic_data:a02" %}'
{% endblock update_ajax_url %}

{% block do_other_queryFunc_thing %}
//查詢框欄位檢核
var ok=true;
var cpnyid_q = document.querySelector("select.qfield#id_cpnyid");
var cpnyid_errmsg = cpnyid_q.parentNode.parentNode.querySelector("#id_cpnyid_err");
if(cpnyid_q.value.length===0)
{
    
    cpnyid_errmsg.innerHTML = "公司品牌 不可空白";
    ok=false;
}

if(!ok)
{
    this.exec_queryFunc = false;
}else
{   
    this.exec_queryFunc = true;
    cpnyid_errmsg.innerHTML="";
    document.querySelector("span.fk_style select#id_cpnyid").value =  cpnyid_q.value;
}


{% endblock do_other_queryFunc_thing %}


{% block cpnyid_select_ajax_url %}
'{% url "basic_data:a02" %}'
{% endblock cpnyid_select_ajax_url %}